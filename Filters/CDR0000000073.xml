<?xml version="1.0"?>
  <xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                 version="1.0"
                 xmlns:cdr="cips.nci.nih.gov/cdr">
   <xsl:output method="html"/>
   <xsl:template match="/">
  <!-- Filter written by C.Burg - 9/5/2001 -->
  <!-- This program is a filter to display the health professional
       protocol abstracts in approximate CancerNet format -->
      
   <!-- <!DOCTYPE HTML PUBLIC '-//IETF//DTD HTML//EN' /> -->
    <HTML>
    <HEAD>
    <TITLE>Formats Health Professional In Scope Protocol Abstracts</TITLE>
     <!--
     <LINK REL='stylesheet' 
           HREF='/stylesheets/protocol2.css' 
           TYPE='text/css' /> -->
    </HEAD>
    <!-- <BASEFONT FACE='Arial, Helvetica, sans-serif' /> -->
    <xsl:apply-templates select="InScopeProtocol"/>
    </HTML>
    </xsl:template>
  <!-- Generate the HTML for the Health Professional Protocol Abstract-->
  <xsl:template match="InScopeProtocol">
    <BODY>
  <!-- Display the Professional protocol title-->
    <xsl:for-each select="ProtocolTitle[@Type='Professional']">
    <h4><xsl:value-of select="."/></h4>
         </xsl:for-each>
   
    <TABLE>
     <TR>
      <!-- Display the protocol primary and other IDs --> 
      <TH ALIGN='left'>Protocol IDs:</TH>
     <TD> 
     <xsl:apply-templates select="ProtocolIDs/PrimaryID/IDString"/>,&#xa0;
     
    

<xsl:for-each select="ProtocolIDs/OtherID">
     <xsl:apply-templates select="IDString"/>
<xsl:if test="position() !=last()">,&#xa0;</xsl:if>
</xsl:for-each>
    </TD>
    </TR>

<!--Display protocol type -->
  <TR>
  <TH ALIGN='left'>Protocol Type:</TH>
     <TD>
     <xsl:for-each select="ProtocolDetails/StudyCategory">
     <xsl:value-of select= "StudyCategoryName"/>
     <xsl:if test="position()!=last()">,</xsl:if>
     </xsl:for-each>  
     </TD>
     </TR>

 <!--Display protocol sponsors -->
     <TR>
     <TH ALIGN='left'>Sponsorship:</TH>
     <TD>
     <xsl:for-each select="ProtocolSponsors/SponsorName">
     <xsl:value-of select= "."/>
     <xsl:if test="position()!=last()">,</xsl:if>
     </xsl:for-each>  
     </TD>
     </TR>
     
  <!--Display protocol status -->
     <TR>
     <TH ALIGN='left'>Status:</TH>
     <TD>
     <xsl:apply-templates select="ProtocolAdminInfo/CurrentProtocolStatus/ProtocolStatusName"/>
    </TD>
    </TR>
  <!--Display protocol Eligibility -->
     <TR>
     <TH ALIGN='left'>Age Range:</TH>
     <TD>
     <xsl:apply-templates select="Eligibility/AgeText"/>
    <!-- <xsl:for each select="Eligibility">
     <xsl:value-of select="AgeText"/>
     </xsl:for-each>-->
    </TD>
    </TR>
     
  </TABLE>
  <!--Display protocol objectives heading and text-->
<h5>OBJECTIVES</h5>
<ol>
<xsl:for-each select="ProtocolAbstract/Professional/Objectives/OrderedList/ListItem">

<li type="I"><xsl:value-of select="."/></li><br /><br /><br />

 </xsl:for-each>
</ol> 

<!--Display protocol Entry Criteria heading and text -->
   <H5>ENTRY CRITERIA</H5>
<xsl:for-each select="ProtocolAbstract/Professional/EntryCriteria/DiseaseCharacteristics/Para">
<p>--Disease Characteristics--</p><br />
<p><xsl:value-of select="."/></p>
</xsl:for-each>
<p>--Patient Characteristics--</p><br />
<xsl:for-each 
select="ProtocolAbstract/Professional/EntryCriteria/PatientCharacteristics/ItemizedList">
<dl>
<dt><xsl:value-of select="ListTitle"/></dt><br />
<dt><xsl:value-of select="ListItem"/></dt><br />
</dl>
</xsl:for-each>

<!--
<xsl:for-each select="ProtocolAbstract/Professional/EntryCriteria/PatientCharacteristics/ItemizedList">
<p><xsl:value-of select="ListTitle"/></p>
<xsl:for-each select="ListItem">
 <dt><xsl:value-of select="."/></dt>
</xsl:for-each>
</xsl:for-each>-->

<h5>OUTLINE</h5>
<xsl:for-each select="ProtocolAbstract/Professional/Outline/Para">
<p><xsl:value-of select="."/></p>
 </xsl:for-each>
<h5>PROJECTED ACCURAL</h5>
<xsl:for-each select="ProtocolAbstract/Professional/ProjectedAccrual/Para">
<p><xsl:value-of select="."/></p>
</xsl:for-each> 
<!--Display protocol stratification and text -->
<xsl:if test="ProtocolAbstract/Professional/Stratification/Para">
   <h5>STRATIFICATION</h5>
  <p><xsl:apply-templates select="ProtocolAbstract/Professional/Stratification/Para"/></p><BR />
</xsl:if>
<!--Display Special Study Parameters and text--> 
<xsl:if test="ProtocolAbstract/Professional/SpecialStudyParameters/Para">
    <h5>SPECIAL STUDY PARAMETERS</h5>
  <p><xsl:apply-templates select="ProtocolAbstract/Professional/SpecialStudyParameters/Para"/></p><br />
</xsl:if>
<!--Display Endpoints -->
<xsl:if test="ProtocolAbstract/Professional/EndPoints/Para">
      <h5>END POINTS</h5>
  <p><xsl:apply-templates select="ProtocolAbstract/Professional/EndPoints/Para"/></p><br />
</xsl:if>
<!--Display protocol accrual and text
   <H4>Projected Accrual</H4>
  <p><xsl:apply-templates select="ProtocolAbstract/Professional/ProjectedAccrual/Para"/></p><BR />-->

<!--Display Dosage Schedule-->
<xsl:if test="ProtocolAbstract/Professional/DoseSchedule/Para">
    <h5>DOSAGE SCHEDULE</h5>
  <xsl:for-each select="ProtocolAbstract/Professional/DoseSchedule/Para">
    <p><xsl:value-of select="."/></p>
      </xsl:for-each>
   </xsl:if>

<!--Display Dosage Forms-->
<xsl:if test="ProtocolAbstract/Professional/DosageForm/Para">
   
   <h5>DOSAGE FORMS</h5>
 <p><xsl:apply-templates select="ProtocolAbstract/Professional/DosageForm/Para"/></p><br />
</xsl:if>



<!-- Display citations for published results -->
<xsl:if test="PublishedResults/Citation">
<h5>PUBLISHED RESULTS OF STUDY</h5>

<xsl:for-each select="PublishedResults/Citation">
  <xsl:variable name="PubCit" select="@cdr:ref"/>
 <!-- <xsl:value-of select="$PubCit"/>-->
   <xsl:variable name="CitInfo" select="document(concat('cdr:',$PubCit))"/>
<!-- <xsl:value-of select="$CitInfo"/>-->

 <xsl:if test="$CitInfo/Citation/PDQCitation">
<xsl:for-each select="$CitInfo/Citation/PDQCitation">
<xsl:for-each select="AuthorList/Author/PersonalName">
<xsl:value-of select="concat(LastName,' ',FirstName)"/>
<xsl:if test="position() !=last()">, </xsl:if>
<xsl:text>&#xa;</xsl:text>
</xsl:for-each>
<xsl:text>:</xsl:text>
<xsl:value-of select="CitationTitle"/>.
<xsl:text>&#xa;</xsl:text>
<xsl:value-of select="PublicationDetails/PublishedIn"/>.
<xsl:value-of select="PublicationDetails/OtherPublicationInformation"/>.<br /><br />
</xsl:for-each>
 </xsl:if>
<!--</xsl:for-each>
</xsl:if>-->

<!--
<xsl:for-each select="PublicationDetails">
 
 <xsl:choose>
  <xsl:when test="contains(PublishedIn/@cdr:ref,'CDR')">
  <xsl:variable name="RefID" select="PublishedIn/@cdr:ref"/>
  <xsl:value-of select="$RefID"/>
  <xsl:if test="contains($RefID,'CDR00')">
  <xsl:variable name="RefInfo" select="document(concat('cdr:',$RefID))"/>-->
 <!--<xsl:value-of select="$RefInfo"/>
 <xsl:value-of select="$RefInfo/Citation/PdqCitation/CitationTitle"/>
 <xsl:text>  </xsl:text>
<xsl:value-of select="$RefInfo/Citation/PdqCitation/PublicationDetails/OtherPublicationInformation"/>
  <xsl:text>  </xsl:text>
  </xsl:if>
 </xsl:when>
 </xsl:choose>
  </xsl:for-each>
<xsl:value-of select="PublicationDetails/OtherPublicationInformation"/>
<xsl:text>.</xsl:text>
</xsl:for-each><br /><br />
</xsl:if>-->

<!--</xsl:for-each>-->

<!-- test to determine if citation reference is a pubmed record -->

<xsl:if test="$CitInfo/Citation/PubmedArticle">

<xsl:if test="$CitInfo/Citation/PubmedArticle/MedlineCitation/Article/AuthorList">

<xsl:for-each
select="$CitInfo/Citation/PubmedArticle/MedlineCitation/Article/AuthorList/Author">

<xsl:if test="position() &lt; 4">
<xsl:value-of select="concat(LastName,' ',Initials)"/>
<xsl:if test="position()!=3">,</xsl:if>
<xsl:text>&#xa;</xsl:text>
</xsl:if>
</xsl:for-each>
<xsl:text> et al.:&#xa0;</xsl:text>
</xsl:if>
</xsl:if>
<!--
</xsl:for-each>
</xsl:if>-->

<xsl:for-each select="$CitInfo/Citation/PubmedArticle/MedlineCitation/Article">
<xsl:value-of select="ArticleTitle"/>
<xsl:text>&#xa;</xsl:text>
</xsl:for-each>

<xsl:for-each select="$CitInfo/Citation/PubmedArticle/MedlineCitation/MedlineJournalInfo/MedlineTA">
<xsl:value-of select="."/>
<xsl:text>&#xa;</xsl:text>
</xsl:for-each>
<!--</xsl:for-each>
</xsl:if>-->
<xsl:for-each select="$CitInfo/Citation/PubmedArticle/MedlineCitation/Article/Journal/JournalIssue">
<xsl:text>&#xa;</xsl:text>
<xsl:value-of select="concat(Volume,'(',Issue,')',': ')"/>
</xsl:for-each>
<xsl:for-each select="$CitInfo/Citation/PubmedArticle/MedlineCitation/Article/Pagination">
<xsl:value-of select="concat(MedlinePgn,', ')"/>
</xsl:for-each>
<!--</xsl:for-each>
</xsl:if>
<xsl:value-of select="concat($CitInfo/Citation/PubmedArticle/MedlineCitation/Article/Pagination/MedlinePgn,', ')"/>-->
<xsl:for-each select="$CitInfo/Citation/PubmedArticle/PubmedData/History/PubMedPubDate[1]/Year">
<xsl:value-of select="."/>
<xsl:text>.&#xa;</xsl:text>
</xsl:for-each>
</xsl:for-each>
</xsl:if>
<!--</xsl:if>
</xsl:if>
</xsl:for-each>
</xsl:for-each>
</xsl:if>-->

<h5>PARTICIPATING ORGANIZATIONS/STUDY CONTACTS</h5>
<xsl:text> Need links resolved</xsl:text>

<h5>STUDY CONTACTS</h5>
<xsl:text>Needs links resolved</xsl:text>
                     




 
</BODY>
</xsl:template>
  </xsl:transform>
