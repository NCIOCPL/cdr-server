<?xml      version = "1.0"?>
<!-- Filter title: Module: Multimedia Denormalization -->
<!--
================================================================

 Filter to denormalize Multimedia elements.
 Written by Volker Englisch, 2004-11-09

================================================================ -->
<xsl:transform               xmlns:xsl = "http://www.w3.org/1999/XSL/Transform"
                             xmlns:cdr = "cips.nci.nih.gov/cdr"
                               version = "1.0">

 <xsl:output                    method = "xml"
                  omit-xml-declaration = "no"
                              encoding = "UTF-8"/>


 <!--
 =================================================================
 Template to denormalize the Multimedia elements
 ================================================================= -->
 <xsl:template                   match = "MediaID | VideoID">
  <xsl:variable                   name = "MediaID"
                                select = "@cdr:ref"/>
  <xsl:variable                   name = "MediaInfo"
                                select = "document(concat('cdr:',$MediaID,
                                                           '/last'))"/>
  <xsl:element                    name = "MediaID">
   <xsl:attribute                 name = "cdr:ref">
    <xsl:value-of               select = "@cdr:ref"/>
   </xsl:attribute>
   <xsl:copy-of                  select = "$MediaInfo/*"/>
  </xsl:element>
 </xsl:template>
</xsl:transform>
