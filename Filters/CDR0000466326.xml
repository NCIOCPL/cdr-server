<?xml version = "1.0" encoding="utf-8"?>
<!-- Filter title: Module: InScopeProtocol HP Eligibility -->
<!--
================================================================

Filter to process Protocol HP Details
Written by Cheryl Burg

BZIssue::5166 - QC reports showing in table format

================================================================ -->
<xsl:transform               xmlns:xsl = "http://www.w3.org/1999/XSL/Transform"
                             xmlns:cdr = "cips.nci.nih.gov/cdr"
               exclude-result-prefixes = "cdr"
                               version = "1.0">

 <xsl:output                    method = "xml"
                  omit-xml-declaration = "no"
                              encoding = "UTF-8"/>

 <!--
 ================================================================
 Display Eligibilty Information
 ================================================================= -->
 <xsl:template                   match = "Eligibility">
  <br />
  <span class="big">Eligibility Criteria</span>
  <br />
  <table        xsl:use-attribute-sets = "table">
   <tr>
    <td         xsl:use-attribute-sets = "cell1of2">
     <b>Healthy Volunteers?</b>
    </td>
    <td         xsl:use-attribute-sets = "cell2of2">
     <xsl:apply-templates       select = "HealthyVolunteers"/>
    </td>
   </tr>
   <tr>
    <td         xsl:use-attribute-sets = "cell1of2">
     <b>Low Age</b>
    </td>
    <td         xsl:use-attribute-sets = "cell2of2">
     <xsl:apply-templates       select = "LowAge"/>
    </td>
   </tr>
   <tr>
    <td         xsl:use-attribute-sets = "cell1of2">
     <b>High Age</b>
    </td>
    <td         xsl:use-attribute-sets = "cell1of2">
     <xsl:apply-templates       select = "HighAge"/>
    </td>
   </tr>
   <tr>
    <td         xsl:use-attribute-sets = "cell1of2">
     <b>Age Range</b>
    </td>
    <td         xsl:use-attribute-sets = "cell1of2">
     <xsl:apply-templates       select = "AgeText"/>
    </td>
   </tr>
   <xsl:if                        test = "Gender">
    <tr>
     <td        xsl:use-attribute-sets = "cell1of2">
      <b>Gender</b>
     </td>
     <td        xsl:use-attribute-sets = "cell1of2">
      <xsl:apply-templates      select = "Gender"/>
     </td>
    </tr>
   </xsl:if>
  </table>

  <table        xsl:use-attribute-sets = "table">
   <tr>
    <td         xsl:use-attribute-sets = "cell1of2">
     <b>Diagnosis</b>
    </td>
    <td         xsl:use-attribute-sets = "cell2of2">
     <table     xsl:use-attribute-sets = "table">
      <tr>
       <td      xsl:use-attribute-sets = "cell1of2">
        <ul class='term'>
         <xsl:for-each          select = "Diagnosis/Term/PreferredName">
          <xsl:sort            select = "."/>
          <li>
           <xsl:value-of        select = "."/>
          </li>
         </xsl:for-each>
        </ul>
       </td>
      </tr>
     </table>
    </td>
   </tr>
   <xsl:if                        test = "Comment">
    <xsl:apply-templates        select = "Comment"
                                  mode = "withAttribute">
     <xsl:with-param              name = "label"
                                select = "'Eligibility Comment'"/>
    </xsl:apply-templates>
   </xsl:if>
  </table>
  <br/>

   <table       xsl:use-attribute-sets = "table">
    <tr>
     <td        xsl:use-attribute-sets = "cell1of2">
      <b>Exclusion Criteria</b>
     </td>
     <td        xsl:use-attribute-sets = "cell2of2">
      <table    xsl:use-attribute-sets = "table">
       <tr>
        <td class="qc_td">
         <ul class='term'>
          <xsl:for-each         select = "ExclusionCriteria/
                                          Term/
                                          PreferredName">
           <xsl:sort            select = "."/>
           <li>
            <xsl:value-of       select = "."/>
           </li>
          </xsl:for-each>
         </ul>
       </td>
      </tr>
     </table>
    </td>
   </tr>
  </table>
  <p/>
 </xsl:template>
</xsl:transform>
