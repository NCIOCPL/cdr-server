<?xml version="1.0"?>
<!--================================================================== -->
<!--Title:    Error Filter: Extract DocError Tag
    Creator:  Volker Englisch, 03/04/2002
    Description:
    The filter is checking if the element DocError exists.  If it does
    the element branch is displayed, otherwise display the document    -->
<!--================================================================== -->
  <xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0"
                xmlns:cdr="cips.nci.nih.gov/cdr">

<xsl:output method="xml" omit-xml-declaration="no"/>
    <xsl:template match="InScopeProtocol">
       <xsl:copy>

<!--      Search for the DocError element anywhere in the document
          ======================================================== -->
          <xsl:choose>
            <xsl:when test="//DocError">
              <xsl:apply-templates select="//DocError" mode="copy"/>
            </xsl:when>
            <xsl:otherwise>
              <xsl:apply-templates select="*" mode="copy"/>
            </xsl:otherwise>
          </xsl:choose>

       </xsl:copy>
    </xsl:template>


<!-- Template rule used to do XML to XML transformations which
     copies any attribute node, or node that is child of of something -->

   <xsl:template match="@*|node()" mode="copy">
     <xsl:copy>
       <xsl:apply-templates select="@*" mode="copy"/>
       <xsl:apply-templates mode="copy"/>
     </xsl:copy>

   </xsl:template>
 </xsl:transform>

