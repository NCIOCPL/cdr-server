<CdrDoc Type='Filter' Id='CDR0000000097'>
<CdrDocCtl>
<DocValStatus readonly="yes">U</DocValStatus>
<DocActiveStatus readonly="yes">A</DocActiveStatus>
<DocTitle readonly="yes">Copy XML for InScopeProtocol Patient</DocTitle>
<DocComment>CVS-V1.12: Itemized List Missing (Bug 1013)</DocComment><ReadyForReview readonly="yes">N</ReadyForReview>
</CdrDocCtl>
<CdrDocXml><![CDATA[<?xml      version = "1.0"?>
<!--
 ================================================================
     $Id: CDR0000000097.xml,v 1.19 2008-05-16 15:44:30 venglisc Exp $

     This filter creates Protocol XML for Patient QC Report
        Written by Cheryl Burg

     $Log: not supported by cvs2svn $
 ================================================================ -->
<xsl:transform               xmlns:xsl = "http://www.w3.org/1999/XSL/Transform"
                               version = "1.0"
                             xmlns:cdr = "cips.nci.nih.gov/cdr">
    
 <xsl:output                    method = "xml" 
                  omit-xml-declaration = "no"/>

 <!-- 
 ======================================================================
 Select data elements to be copied and add tags when an incomplete
 node is copied
 Written by Cheryl Burg 11-5-2001
 updated 10/27/2003 cb
 ====================================================================== --> 
 <xsl:template                   match = "InScopeProtocol | 
                                          ScientificProtocolInfo">
  <xsl:copy>
 
   <!-- 
   ====================================================================
   Copy Protocol Identifiers 
   ==================================================================== -->
   <xsl:apply-templates         select = "ProtocolTitle[@Type='Professional']" 
                                  mode = "copy"/>
   <xsl:apply-templates         select = "ProtocolTitle[@Type='Original']" 
                                  mode = "copy"/>

   <xsl:apply-templates         select = "PdqKey" 
                                  mode = "copy"/>
   <ProtocolIDs>
    <xsl:apply-templates        select = "ProtocolIDs/PrimaryID" 
                                  mode = "copy"/>
    <xsl:for-each               select = "ProtocolIDs/OtherID">
     <OtherID>
      <xsl:apply-templates      select = "IDType" 
                                  mode = "copy"/>
      <xsl:apply-templates      select = "IDString" 
                                  mode = "copy"/>
      <xsl:apply-templates      select = "Comment" 
                                  mode = "copy"/>
     </OtherID>
    </xsl:for-each>
   </ProtocolIDs>

   <!--
   ===================================================================
   Copy the ProtocolDetail section
   =================================================================== -->
   <xsl:apply-templates         select = "ProtocolDetail"
                                  mode = "copy"/>

   <!-- 
   ===================================================================
   Copy protocol titles
   =================================================================== -->
   <xsl:apply-templates         select = "ProtocolTitle[@Type='Patient']" 
                                  mode = "copy"/>

   <!-- 
   ============================================================ 
   Copy protocol abstract
   ============================================================ -->
   <ProtocolAbstract2>
    <Patient>
     <xsl:apply-templates       select = "ProtocolAbstract/Patient/Rationale"
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/Patient/Purpose" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/Patient/
                                          EligibilityText" 
                                  mode = "copy"/>

     <xsl:apply-templates       select = "ProtocolAbstract/Patient/
                                          TreatmentIntervention" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/Patient/
                                          EnteredBy" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/Patient/
                                          EntryDate" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/Patient/
                                          Comment" 
                                  mode = "copy"/>
    </Patient>
   </ProtocolAbstract2>

   <!-- 
   ===================================================================
   Copy protocol abstract 
   =================================================================== -->
   <ProtocolAbstract>
    <Professional>
     <xsl:apply-templates       select = "ProtocolAbstract/Professional/
                                          Objectives"
                                  mode = "copy"/>
     <Outcomes>
      <xsl:apply-templates      select = "ProtocolAbstract/
                                          Professional/
                                          Outcome" 
                                  mode = "copy"/>
     </Outcomes>
     <xsl:apply-templates       select = "ProtocolAbstract/
                                          Professional/
                                          EntryCriteria" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/
                                          Professional/
                                          ProjectedAccrual" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/
                                          Professional/
                                          Outline" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/
                                          Professional/
                                          ArmsOrGroups" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "Eligibility" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/
                                          Professional/
                                          DoseSchedule" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/
                                          Professional/
                                          EnteredBy" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/
                                          Professional/
                                          EntryDate" 
                                  mode = "copy"/>
     <xsl:apply-templates       select = "ProtocolAbstract/
                                          Professional/
                                          Comment" 
                                  mode = "copy"/>
    </Professional>
   </ProtocolAbstract>
   <xsl:apply-templates         select = "DateLastModified" 
                                  mode = "copy"/>
   <xsl:apply-templates         select = "CdrDocCtl" 
                                  mode = "copy"/>
  </xsl:copy>   
 </xsl:template>


 <!-- 
 ==================================================================
 Template rule used to do XML to XML transformations which
 copies any attribute node, or node that is child of of something 
 ================================================================== -->
 <xsl:template                   match = "@*|node()" 
                                  mode = "copy">
  <xsl:copy>
   <xsl:apply-templates         select = "@*" 
                                  mode = "copy"/>
   <xsl:apply-templates           mode = "copy"/>
  </xsl:copy> 
 </xsl:template>
</xsl:transform>
]]>
</CdrDocXml>
</CdrDoc>