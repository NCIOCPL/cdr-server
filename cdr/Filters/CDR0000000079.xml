<CdrDoc Type='Filter' Id='CDR0000000079'>
<CdrDocCtl>
<DocValStatus readonly="yes">U</DocValStatus>
<DocActiveStatus readonly="yes">A</DocActiveStatus>
<DocTitle readonly="yes">Health Professional Summary Report</DocTitle>
</CdrDocCtl>
<CdrDocXml><![CDATA[<?xml version="1.0"?>

<!-- ===================================================================
      Filter to create Health Professional Summary Report
     =================================================================== -->

  <xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                 version="1.0"
                 xmlns:cdr="cips.nci.nih.gov/cdr"
                 exclude-result-prefixes="cdr">

      <xsl:import    href = "cdr:name:InLine Markup Formatter"/>
      <xsl:include   href = "cdr:name:Table Formatter"/>
     

   <xsl:output method="html"/>
   <xsl:template match="/">
    <!--Filter written by C.Burg - 6/12/2001 -->
    <!-- Modified to correct format of citations imbedded in text 6-24-2002 -->
    <!-- fixed bug in TOC  7/10/2002 -->
   <!-- <!DOCTYPE HTML PUBLIC '-//IETF//DTD HTML//EN' /> -->
    <HTML>
    <HEAD>
     <xsl:variable name="cdrdocs" select="document('cdrx:/*/CdrCtl')"/>

    <TITLE><xsl:value-of select="document('cdrutil:/docid')"/>&#xa0;&#xa0;<xsl:value-of select="substring-before($cdrdocs/CdrDocCtl/DocTitle,';')"/></TITLE>
     
   <!--Inline sytle sheet to display H2 and H4 headers in Navy -->
     <STYLE>
       h2 { font style: bold font size: 14pt}
       h3 { font style: bold font size: 13pt}
       h4 { font style: bold font size: 12pt}
       td { font size: 8pt}
          <!-- P {font size: 12pt}
           p {font size: medium}
           dd {font size: medium}
           dt {font size: medium}
           li {font size: medium}
           pre {font size: medium}
           H3  {font size: medium}-->
           li.lnone {list-style-type: none}
  
     </STYLE>
     <!--
     <LINK REL='stylesheet' 
           HREF='/stylesheets/protocol2.css' 
           TYPE='text/css' /> -->
    </HEAD>
     <BASEFONT FACE='Arial, Helvetica, sans-serif' /> 
    <xsl:apply-templates select="Summary"/>
    </HTML>
   </xsl:template>

  <!-- ==================================================================
           Display summary title
       ================================================================== -->

<xsl:template match="Summary">

 <BODY>
 <xsl:for-each select="SummaryTitle">
 <h2><xsl:value-of select="."/></h2>
 </xsl:for-each>

<!-- ==================================================================
          Display a Contents List of Summary Section Titles 
          10/06/2002 - Modified code to remove 4th level titles (CB) 
           10/08/2002 - took breaks out at end of titles.
     =================================================================== -->


<dl>
<xsl:for-each select="SummarySection">
<dt><xsl:value-of select="Title"/></dt>
<xsl:choose>
<xsl:when test="descendant::SummarySection">
<dl>
<xsl:for-each select="./SummarySection">
<xsl:if test="not(SummarySection/SummarySection/SummarySection/SummarySection/Title)">
<dt><xsl:value-of select="Title"/></dt>
<dl>
<xsl:for-each select="./SummarySection">
<dt><xsl:value-of select="Title"/></dt>
</xsl:for-each>
</dl>
</xsl:if>
</xsl:for-each>
</dl>
</xsl:when>
<xsl:otherwise>
</xsl:otherwise>
</xsl:choose>
</xsl:for-each>
</dl>
<xsl:apply-templates/>
</BODY>
</xsl:template>

 

<!-- ======================================================================
    templates to handle summary section anchors,list formats, and paragraphs
     that can occur in any order in the summaries 
     10/06/2002(CB) - Added templates for inserted titles to preserve the format
                  for newly inserted titles (CB)
      10/09/2002 (CB) Removed italics from third level titles
     ====================================================================== -->

<!-- Display a summary section title and include anchor --> 


<xsl:template match="SummarySection/Title">
<h2><a name="{translate(.,' ','')}"><xsl:apply-templates/></a></h2>
</xsl:template>

<xsl:template match="SummarySection/Insertion/Title">
<h2><a name="{translate(.,' ','')}"><xsl:apply-templates/></a></h2>
</xsl:template>


<xsl:template match="SummarySection/SummarySection/Title">
<h3><a name="{translate(.,' ','')}"><xsl:apply-templates/></a></h3>
</xsl:template>

<xsl:template match="SummarySection/SummarySection/Insertion/Title">
<h3><a name="{translate(.,' ','')}"><xsl:apply-templates/></a></h3>
</xsl:template>

<xsl:template match="SummarySection/SummarySection/SummarySection/Title">
<h4><a name="{translate(.,' ','')}"><xsl:apply-templates/></a></h4>
</xsl:template>



<xsl:template match="SummarySection/SummarySection/SummarySection/SummarySection/Title">
<i><h4><a name="{translate(.,' ','')}"><xsl:apply-templates/></a></h4></i>
</xsl:template>

 <xsl:template match="SummarySection/SummarySection/SummarySection/Insertion/Title">
<h4><a name="{translate(.,' ','')}"><xsl:apply-templates/></a></h4>
</xsl:template>
                       
 <xsl:template match=" SummarySection/SummarySection/SummarySection/SummarySection/Insertion/Title">
<i><h4><a name="{translate(.,' ','')}"><xsl:apply-templates/></a></h4></i>
</xsl:template>
          
	    



<!-- ======================================================================
                           display footnotes
     ===================================================================== -->

             <xsl:template match="CitationLink">
             <xsl:variable name="nextRef" select="position()+1"/>
             <xsl:variable name="firstRef" select="position()-1"/>
             <xsl:variable name="ref" select="."/>
             <xsl:if test="name(../node()[$firstRef])!='CitationLink'">
	     <xsl:value-of select="'['"/>
	     </xsl:if>
                    
           
	    <xsl:value-of select="@refidx"/>

	    
	    	
	     <xsl:if test="name(../node()[$nextRef])='CitationLink'">
	    <xsl:value-of select="','"/>
	    </xsl:if>
            
          
           <xsl:if test="name(../node()[$nextRef])!='CitationLink'">
	    <xsl:value-of select="']'"/>
           </xsl:if>   
             
	   </xsl:template>


             
           

  	   
   

 
<!-- =========================================================
                       Link to glossaryTermRefs 
     =========================================================-->
<xsl:template match="GlossaryTermRef">
 <a>
 <xsl:attribute name="href">
 <xsl:value-of select="concat('/cgi-bin/cdr/Filter.py?DocId=',@cdr:href,'&amp;Filter=name:Glossary+Term+Display+for+Patient+Summaries')"/>
 </xsl:attribute>
<xsl:value-of select="."/>
</a>
</xsl:template>



<!-- ===================================================================
                 display references 
     ================================================================== -->

<xsl:template match="ReferenceList">
<xsl:if test="Reference">
<h3><b>References:</b></h3>
<ol>
<xsl:for-each select="Reference">
<xsl:variable name="Refidx" select="@refidx"/>
<p><li><a name="{$Refidx}"><xsl:apply-templates select=".">
</xsl:apply-templates></a></li></p>
</xsl:for-each>
</ol>
</xsl:if>
</xsl:template>



<!-- =======================================================================
       This template deletes data elements not used in the display 
     ==================================================================== -->

<xsl:template match="PdqKey | PDQBoard | SectionType |Diagnosis | SummaryLanguage| SummaryType |SummaryAudience | SummaryTitle |MainTopics | SecondaryTopics | DocId| DateLastModified | PatientVersionOf | TranslationOf"/>

<!-- ============================================================
                          Display Paragraphs 
     ============================================================== -->

                         <xsl:template match="Para">
                         <p><xsl:apply-templates/></p>
                         </xsl:template>

                       
<!-- ================================================================== 
                       Display an Insertion 
     =================================================================== -->

                 <xsl:template match="Insertion">
                <font color="#FF0000"><xsl:apply-templates/></font>
                 </xsl:template>
   
       <!-- Added 10/07/2002 to display inserted text in table header (CB)

                <xsl:template match="Entry/Insertion">
                <font color="#FF0000"><xsl:apply-templates/></font>
                 </xsl:template>-->

         
<!-- ==================================================================
                     Display a Deletion 
     =================================================================== -->



              <xsl:template match="Deletion">
              <strike><xsl:apply-templates/></strike>
              </xsl:template>

                          



     <!-- Added 10/07/2002 to display deleted text in table header (CB)-->

               <xsl:template match="Entry/Deletion">
               <strike><xsl:apply-templates/></strike>
               </xsl:template>



<!-- =====================================================================
            Create a link to another document or website 
     ================================================================== -->

          <xsl:template match="ExternalRef">
          <xsl:variable name="nlink" select="@cdr:xref"/>
          <a href="{$nlink}"><xsl:apply-templates/></a>
          </xsl:template>

           <xsl:template match="Reference/ExternalRef">
          <xsl:variable name="nlink" select="@cdr:xref"/>
          <a href="{$nlink}"><xsl:apply-templates/></a>
          </xsl:template>


<!--=====================================================================
                              Display tables -old format
    ==================================================================== -->

                 <xsl:template match="Para/TT">
                 <pre><xsl:apply-templates/></pre>
                 </xsl:template>

                    
       
      
            
        

</xsl:transform>]]>
</CdrDocXml>
</CdrDoc>